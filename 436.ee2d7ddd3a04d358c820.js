"use strict";(self.webpackChunkbike_service=self.webpackChunkbike_service||[]).push([[436],{1156:function(V,d,v){var s,h=this&&this.__extends||(s=function(z,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,n){f.__proto__=n}||function(f,n){for(var m in n)n.hasOwnProperty(m)&&(f[m]=n[m])})(z,t)},function(z,t){function f(){this.constructor=z}s(z,t),z.prototype=null===t?Object.create(t):(f.prototype=t.prototype,new f)});Object.defineProperty(d,"__esModule",{value:!0});var p=v(7241);d.map=function(s,z){return function(f){if("function"!=typeof s)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return f.lift(new c(s,z))}};var c=function(){function s(z,t){this.project=z,this.thisArg=t}return s.prototype.call=function(z,t){return t.subscribe(new H(z,this.project,this.thisArg))},s}();d.MapOperator=c;var H=function(s){function z(t,f,n){var m=s.call(this,t)||this;return m.project=f,m.count=0,m.thisArg=n||m,m}return h(z,s),z.prototype._next=function(t){var f;try{f=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(f)},z}(p.Subscriber)},4747:function(V,d,v){var t,h=this&&this.__extends||(t=function(f,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,u){m.__proto__=u}||function(m,u){for(var C in u)u.hasOwnProperty(C)&&(m[C]=u[C])})(f,n)},function(f,n){function m(){this.constructor=f}t(f,n),f.prototype=null===n?Object.create(n):(m.prototype=n.prototype,new m)});Object.defineProperty(d,"__esModule",{value:!0});var p=v(7241),r=v(7786),c=v(7382);d.tap=function(t,f,n){return function(u){return u.lift(new s(t,f,n))}};var s=function(){function t(f,n,m){this.nextOrObserver=f,this.error=n,this.complete=m}return t.prototype.call=function(f,n){return n.subscribe(new z(f,this.nextOrObserver,this.error,this.complete))},t}(),z=function(t){function f(n,m,u,C){var M=t.call(this,n)||this;return M._tapNext=r.noop,M._tapError=r.noop,M._tapComplete=r.noop,M._tapError=u||r.noop,M._tapComplete=C||r.noop,c.isFunction(m)?(M._context=M,M._tapNext=m):m&&(M._context=m,M._tapNext=m.next||r.noop,M._tapError=m.error||r.noop,M._tapComplete=m.complete||r.noop),M}return h(f,t),f.prototype._next=function(n){try{this._tapNext.call(this._context,n)}catch(m){return void this.destination.error(m)}this.destination.next(n)},f.prototype._error=function(n){try{this._tapError.call(this._context,n)}catch(m){return void this.destination.error(m)}this.destination.error(n)},f.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(n){return void this.destination.error(n)}return this.destination.complete()},f}(p.Subscriber)},7786:(V,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.noop=function(){}},5436:(V,d,v)=>{v.r(d),v.d(d,{BikesModule:()=>Z0});var h=v(8583),p=v(7172),r=v(665),c=v(7716);let H=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-bikes"]],decls:1,vars:0,template:function(a,e){1&a&&c._UZ(0,"router-outlet")},directives:[p.lC],styles:[""]}),i})();var s=v(1156),z=v(8002),t=v(4959);let f=(()=>{class i{constructor(a){this.db=a}getBikes(){return this.db.list("bikes").snapshotChanges().pipe((0,z.U)(a=>a.map(e=>this.assignKey(e))))}getBike(a){return this.db.object(`bikes/${a}`).snapshotChanges().pipe((0,z.U)(e=>this.assignKey(e)))}addBike(a){return this.db.list("bikes").push(a)}assignKey(a){return Object.assign(Object.assign({},a.payload.val()),{id:a.key})}editBike(a,e){return this.db.object(`bikes/${a}`).update(e)}removeBike(a){return this.db.object(`bikes/${a}`).remove()}}return i.\u0275fac=function(a){return new(a||i)(c.LFG(t.KQ))},i.\u0275prov=c.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var g={prefix:"fab",iconName:"github",icon:[496,512,[],"f09b","M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"]},x=v(9976),Y7=v(7556),Q7=v(9577);const K7=function(){return["/bikes"]};let X7=(()=>{class i{constructor(a,e){this.authService=a,this.router=e,this.bicycleIcon=x._Vg,this.homeIcon=x.J9Y,this.motorcycleIcon=x.wc0,this.signoutIcon=x.jLD,this.githubIcon=g}ngOnInit(){}logout(){this.authService.logout(),this.router.navigate(["/login"])}}return i.\u0275fac=function(a){return new(a||i)(c.Y36(Y7.e),c.Y36(p.F0))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-sidebar"]],decls:35,vars:7,consts:[[1,"d-flex","flex-sm-column","flex-row","flex-grow-1","align-items-center","align-items-sm-start","px-3","pt-2","text-white"],["href","/",1,"d-flex","align-items-center","pb-sm-3","mb-3","md-0","me-md-auto","text-white","text-decoration-none"],[1,"fs-4"],["src","assets/logo.png","alt","logo",1,"logo","mb-0","mb-sm-1"],[1,"d-none","d-sm-inline"],["id","menu",1,"nav","nav-pills","flex-sm-column","flex-row","flex-nowrap","flex-shrink-1","flex-sm-grow-0","flex-grow-1","mb-sm-auto","mb-0","justify-content-between","justify-content-sm-center","align-items-center","align-items-sm-start"],[1,"nav-item"],["href","#",1,"nav-link","px-sm-0","px-2",3,"routerLink"],[3,"icon"],[1,"ms-1","d-none","d-sm-inline"],["href","#",1,"nav-link","px-sm-0","px-2"],[1,"fa","fa-solid","fa-motorcycle"],[3,"click"],[1,"nav-item","py-sm-4","mt-sm-auto","ms-auto","ms-sm-0","flex-shrink-1"],["href","#",1,"d-flex","align-items-center","text-white","text-decoration-none"],[1,"d-none","d-sm-inline","float-sm-end","mx-1"]],template:function(a,e){1&a&&(c.TgZ(0,"div",0),c.TgZ(1,"a",1),c.TgZ(2,"span",2),c._UZ(3,"img",3),c.TgZ(4,"span",4),c._uU(5," Bike Workshop "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(6,"ul",5),c.TgZ(7,"li",6),c.TgZ(8,"a",7),c._UZ(9,"fa-icon",8),c.TgZ(10,"span",9),c._uU(11,"Home"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"li",6),c.TgZ(13,"a",7),c._UZ(14,"fa-icon",8),c.TgZ(15,"span",9),c._uU(16,"Bike List"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(17,"li"),c.TgZ(18,"a",10),c._UZ(19,"fa-icon",8),c._UZ(20,"em",11),c.TgZ(21,"span",9),c._uU(22,"Motorcycle List "),c._UZ(23,"br"),c._uU(24," (Work in progress)"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"li",12),c.NdJ("click",function(){return e.logout()}),c.TgZ(26,"a",10),c._UZ(27,"fa-icon",8),c.TgZ(28,"span",9),c._uU(29,"Logout"),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(30,"div",13),c.TgZ(31,"a",14),c._UZ(32,"fa-icon",8),c.TgZ(33,"span",15),c._uU(34,"Kamil Wiera"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&a&&(c.xp6(9),c.Q6J("icon",e.homeIcon),c.xp6(4),c.Q6J("routerLink",c.DdM(6,K7)),c.xp6(1),c.Q6J("icon",e.bicycleIcon),c.xp6(5),c.Q6J("icon",e.motorcycleIcon),c.xp6(8),c.Q6J("icon",e.signoutIcon),c.xp6(5),c.Q6J("icon",e.githubIcon))},directives:[p.yS,Q7.BN],styles:[".logo[_ngcontent-%COMP%]{width:50px;height:50px}@media (min-width: 576px){.h-sm-100[_ngcontent-%COMP%]{height:100%}}.nav-link[_ngcontent-%COMP%]{color:#fff}body[_ngcontent-%COMP%]{background:#121212;color:#fff}"]}),i})();function $7(i,o){if(1&i&&(c.TgZ(0,"div",2),c.TgZ(1,"div",3),c.TgZ(2,"div",4),c.TgZ(3,"p",5),c._uU(4),c.TgZ(5,"span",6),c._uU(6),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&i){const a=c.oxw();c.xp6(4),c.hij(" Total cost is ",a.cost,"PLN "),c.xp6(2),c.hij("Tax: ",a.tax,"PLN")}}let c0=(()=>{class i{constructor(){this.showTaxes=!1,this.tax=0}countTaxes(){this.showTaxes=!0,this.tax=.15*this.cost}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-total-cost"]],inputs:{cost:"cost"},decls:3,vars:1,consts:[[1,"btn","btn-sm","btn-primary","float-start",3,"click"],["class","row d-block pt-5",4,"ngIf"],[1,"row","d-block","pt-5"],[1,"col-sm-12"],[1,"total-cost","text-end"],[1,"text-right"],[1,"d-block"]],template:function(a,e){1&a&&(c.TgZ(0,"button",0),c.NdJ("click",function(){return e.countTaxes()}),c._uU(1,"Count Tax"),c.qZA(),c.YNc(2,$7,7,2,"div",1)),2&a&&(c.xp6(2),c.Q6J("ngIf",e.showTaxes))},directives:[h.O5],styles:[""],changeDetection:0}),i})();var L=v(8239),Z=v(2340);const a0=["files"];function e0(i,o){1&i&&(c.TgZ(0,"p",29),c._uU(1," This field is required "),c.qZA())}function i0(i,o){1&i&&(c.TgZ(0,"span"),c._uU(1," More"),c.qZA())}function l0(i,o){if(1&i){const a=c.EpF();c.TgZ(0,"div",33),c.TgZ(1,"div",34),c.TgZ(2,"div",35),c.TgZ(3,"div",36),c.TgZ(4,"h5"),c._uU(5),c.ALo(6,"currency"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(7,"div",37),c.TgZ(8,"div",2),c.TgZ(9,"div",3),c.TgZ(10,"label",38),c._uU(11,"Part Name"),c.qZA(),c._UZ(12,"input",39),c.qZA(),c.TgZ(13,"div",3),c.TgZ(14,"label",40),c._uU(15,"Price of this bike part"),c.qZA(),c._UZ(16,"input",41),c.qZA(),c.TgZ(17,"div",42),c.TgZ(18,"label",43),c._uU(19,"Is this part in stock?"),c.qZA(),c._UZ(20,"input",44),c.qZA(),c.TgZ(21,"div",45),c.TgZ(22,"button",46),c.NdJ("click",function(){const b=c.CHM(a).index;return c.oxw(2).removePart(b)}),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&i){const a=o.$implicit,e=o.index;c.xp6(1),c.Q6J("formGroupName",e),c.xp6(4),c.lnq(" ",e+1,")",a.value.name," ",c.xi3(6,4,a.value.price,"PLN")," ")}}function o0(i,o){if(1&i){const a=c.EpF();c.TgZ(0,"div",30),c.TgZ(1,"h4"),c._uU(2,"Parts"),c.qZA(),c.YNc(3,l0,23,7,"div",31),c.TgZ(4,"button",32),c.NdJ("click",function(){return c.CHM(a),c.oxw().addPart()}),c._uU(5,"Add Parts"),c.qZA(),c.qZA()}if(2&i){const a=c.oxw();c.xp6(3),c.Q6J("ngForOf",a.parts.controls)}}function f0(i,o){1&i&&c._uU(0," Placeholder for edit Parts component ")}let k=(()=>{class i{constructor(a,e,l,b){this.formBuilder=a,this.bikesService=e,this.router=l,this.route=b,this.formData=new FormData,this.imageUrl=[],this.showFileInput=!0,this.upload_preset=Z.N.cloudinary.upload_preset,this.url=Z.N.cloudinary.url}ngOnInit(){this.form=this.buildbikeForm()}buildbikeForm(){return this.formBuilder.group({model:["",r.kI.required],type:"",deliveryDate:["",r.kI.required],deadline:["",r.kI.required],color:["",r.kI.required],clientFirstName:["",r.kI.required],clientSurname:["",r.kI.required],isFullyDamaged:!1,year:["",r.kI.required],imageUrl:["",r.kI.required],parts:this.formBuilder.array([])})}addBike(){var a=this;return(0,L.Z)(function*(){yield a.addPhotos();let e=Object.assign({},a.form.value);e.deliveryDate=new Date(e.deliveryDate).toISOString().slice(0,10),e.deadline=new Date(e.deadline).toISOString().slice(0,10),e.cost=a.getPartsCost(e.parts),e.imageUrl=a.imageUrl,a.bikesService.addBike(e)})()}editBike(a){var e=this;return(0,L.Z)(function*(){let l=e.route.snapshot.params.id,b=Object.assign({},e.form.value);b.imageUrl=a.imageUrl,yield e.addPhotos();for(let N=0;N<e.imageUrl.length;N++)b.imageUrl.push(e.imageUrl);e.bikesService.editBike(l,b),e.router.navigate(["/bikes"])})()}addPhotos(){var a=this;return(0,L.Z)(function*(){for(let e of a.filesInput.nativeElement.files)a.formData.append("file",e),a.formData.append("upload_preset",a.upload_preset),a.formData.append("folder","bike_service"),yield fetch(a.url,{method:"POST",body:a.formData}).then(l=>l.json()).then(l=>{a.imageUrl.push(l.url)})})()}get parts(){return this.form.get("parts")}buildParts(){return this.formBuilder.group({name:"",inStock:!0,price:""})}getPartsCost(a){return a.reduce((l,b)=>Number(l)+Number(b.price),0)}addPart(){this.parts.push(this.buildParts())}removePart(a){this.parts.removeAt(a)}}return i.\u0275fac=function(a){return new(a||i)(c.Y36(r.qu),c.Y36(f),c.Y36(p.F0),c.Y36(p.gz))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-bike-form"]],viewQuery:function(a,e){if(1&a&&c.Gf(a0,5),2&a){let l;c.iGM(l=c.CRH())&&(e.filesInput=l.first)}},inputs:{editForm:"editForm"},decls:48,vars:5,consts:[[1,"data-container","rounded"],["action","",3,"formGroup"],[1,"row","form-group"],[1,"col-sm-4"],["for","model"],["formControlName","model","type","text","name","model","id","model","placeholder","model",1,"form-control"],["class","alert alert-danger",4,"ngIf"],["for","type"],["formControlName","type","type","text","name","type","id","type","placeholder","type",1,"form-control"],["for","color"],["formControlName","color","type","text","name","color","id","color","placeholder","cost",1,"form-control"],[1,"col-sm-6"],["for","clientFirstName"],["formControlName","clientFirstName","type","text","name","clientFirstName","id","clientFirstName","placeholder","Client First Name",1,"form-control"],["for","clientSurname"],["formControlName","clientSurname","type","text","name","clientSurname","id","clientSurname","placeholder","surname",1,"form-control"],["for","deliveryDate"],["formControlName","deliveryDate","type","date","name","deliveryDate","id","deliveryDate","placeholder","date",1,"form-control"],["for","deadline"],["formControlName","deadline","type","date","name","deadline","id","deadline","placeholder","Deadline",1,"form-control"],[1,"col-sm-4","d-flex","align-items-center","justify-content-end"],["for","isFullyDamaged"],["formControlName","isFullyDamaged","type","checkbox","name","isFullyDamaged","id","isFullyDamaged",1,"checkbox"],[1,"my-5","row"],[4,"ngIf"],["multiple","","formControlName","imageUrl","type","file","accept","image/*","name","file",1,"col"],["files",""],["class","mb-5",4,"ngIf","ngIfElse"],["partsEditForm",""],[1,"alert","alert-danger"],[1,"mb-5"],["formArrayName","parts",4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"click"],["formArrayName","parts"],[3,"formGroupName"],[1,"row","border-top","mt-3"],[1,"col-12"],[1,"row"],["for","name"],["formControlName","name","type","text","name","name","id","name","placeholder","name",1,"form-control"],["for","price"],["formControlName","price","type","number","name","price","id","price","placeholder","price",1,"form-control"],[1,"col-sm","d-flex","align-items-center","justify-content-end"],["for","inStock",1,"m-15"],["formControlName","inStock","type","checkbox","name","inStock","id","inStock",1,"checkbox"],[1,"col"],["type","button","aria-label","Close",1,"btn-close","float-end",3,"click"]],template:function(a,e){if(1&a&&(c.TgZ(0,"div",0),c.TgZ(1,"form",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c.TgZ(4,"label",4),c._uU(5,"Model"),c.qZA(),c._UZ(6,"input",5),c.YNc(7,e0,2,0,"p",6),c.qZA(),c.TgZ(8,"div",3),c.TgZ(9,"label",7),c._uU(10,"Type"),c.qZA(),c._UZ(11,"input",8),c.qZA(),c.TgZ(12,"div",3),c.TgZ(13,"label",9),c._uU(14,"Color"),c.qZA(),c._UZ(15,"input",10),c.qZA(),c.qZA(),c.TgZ(16,"div",2),c.TgZ(17,"div",11),c.TgZ(18,"label",12),c._uU(19,"Client First Name"),c.qZA(),c._UZ(20,"input",13),c.qZA(),c.TgZ(21,"div",11),c.TgZ(22,"label",14),c._uU(23,"Client Surname"),c.qZA(),c._UZ(24,"input",15),c.qZA(),c.qZA(),c.TgZ(25,"div",2),c.TgZ(26,"div",3),c.TgZ(27,"label",16),c._uU(28,"Delivery Date"),c.qZA(),c._UZ(29,"input",17),c.qZA(),c.TgZ(30,"div",3),c.TgZ(31,"label",18),c._uU(32,"Deadline"),c.qZA(),c._UZ(33,"input",19),c.qZA(),c.TgZ(34,"div",20),c.TgZ(35,"label",21),c._uU(36,"Is bike fully damaged?"),c.qZA(),c._UZ(37,"input",22),c.qZA(),c.qZA(),c.TgZ(38,"div",23),c.TgZ(39,"h5"),c._uU(40,"Add"),c.YNc(41,i0,2,0,"span",24),c._uU(42," Photos"),c.qZA(),c._UZ(43,"input",25,26),c.qZA(),c.YNc(45,o0,6,1,"div",27),c.YNc(46,f0,1,0,"ng-template",null,28,c.W1O),c.qZA(),c.qZA()),2&a){const l=c.MAs(47);c.xp6(1),c.Q6J("formGroup",e.form),c.xp6(6),c.Q6J("ngIf",!e.form.get("model").valid&&e.form.get("model").dirty),c.xp6(34),c.Q6J("ngIf",e.editForm),c.xp6(4),c.Q6J("ngIf",!e.editForm)("ngIfElse",l)}},directives:[r._Y,r.JL,r.sg,r.Fj,r.JJ,r.u,h.O5,r.Wl,h.sg,r.CE,r.x0,r.wV],pipes:[h.H9],styles:[""]}),i})(),r0=(()=>{class i{transform(a){return a?a.charAt(0)+".":""}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275pipe=c.Yjl({name:"surnameShortcut",type:i,pure:!0}),i})();const n0=["app-bike-table-row",""],m0=function(i){return{"row-error":i}};let t0=(()=>{class i{constructor(a,e,l){this.el=a,this.renderer=e,this.bikeService=l,this.removedBike=new c.vpe,this.deadline=!1}onmouseenter(){this.setRemoveBtnStyle("red")}onmouseleave(){this.setRemoveBtnStyle("#0d6efd")}ngOnInit(){this.deadline=new Date(this.bike.deadline)<new Date}setRemoveBtnStyle(a){this.renderer.setStyle(this.el.nativeElement.querySelector(".remove-btn"),"color",a)}removeBike(a,e){e.stopPropagation(),this.bikeService.removeBike(a.id)}}return i.\u0275fac=function(a){return new(a||i)(c.Y36(c.SBq),c.Y36(c.Qsj),c.Y36(f))},i.\u0275cmp=c.Xpm({type:i,selectors:[["","app-bike-table-row",""]],hostVars:2,hostBindings:function(a,e){1&a&&c.NdJ("mouseenter",function(){return e.onmouseenter()})("mouseleave",function(){return e.onmouseleave()}),2&a&&c.ekj("after-deadline",e.deadline)},inputs:{bike:"bike"},outputs:{removedBike:"removedBike"},attrs:n0,decls:17,vars:22,consts:[["csImportant","",3,"ngClass"],[1,"row-bike"],["csImportant","",1,"row-bike"],[1,"remove-btn",3,"click"]],template:function(a,e){1&a&&(c.TgZ(0,"td",0),c._uU(1),c.ALo(2,"uppercase"),c.qZA(),c.TgZ(3,"td",1),c._uU(4),c.ALo(5,"date"),c.qZA(),c.TgZ(6,"td",1),c._uU(7),c.ALo(8,"date"),c.qZA(),c.TgZ(9,"td",1),c._uU(10),c.ALo(11,"surnameShortcut"),c.qZA(),c.TgZ(12,"td",2),c._uU(13),c.ALo(14,"currency"),c.qZA(),c.TgZ(15,"td",3),c.NdJ("click",function(b){return e.removeBike(e.bike,b)}),c._uU(16," (X)"),c.qZA()),2&a&&(c.Q6J("ngClass",c.VKq(20,m0,e.bike.isFullyDamaged)),c.xp6(1),c.hij(" ",c.lcZ(2,7,null==e.bike?null:e.bike.model),""),c.xp6(3),c.hij(" ",c.xi3(5,9,null==e.bike?null:e.bike.deliveryDate,"shortDate"),""),c.xp6(3),c.hij(" ",c.xi3(8,12,null==e.bike?null:e.bike.deadline,"shortDate"),""),c.xp6(3),c.AsE(" ",c.lcZ(11,15,e.bike.clientFirstName)," ",e.bike.clientSurname,""),c.xp6(3),c.hij(" ",c.xi3(14,17,null==e.bike?null:e.bike.cost,"PLN"),""))},directives:[h.mk],pipes:[h.gd,h.uU,r0,h.H9],styles:["td[_ngcontent-%COMP%]{cursor:pointer;color:#0d6efd}.row-error[_ngcontent-%COMP%]{border-left:2px solid red}"]}),i})();const v0=["TaxRef"],z0=["addBikeTitle"],h0=["bikeForm"],s0=["app-table-table-row"],p0=function(i){return[i]};function M0(i,o){if(1&i&&c._UZ(0,"tr",21),2&i){const a=o.$implicit;c.Q6J("bike",a)("routerLink",c.VKq(2,p0,a.id))}}let b0=(()=>{class i{constructor(a,e){this.bikesService=a,this.router=e,this.visibleGross=!0}ngOnInit(){this.loadBikes(),this.Tax.subscribe(a=>this.cost=a)}loadBikes(){this.bikes=this.bikesService.getBikes(),this.countTax()}countTax(){this.Tax=this.bikes.pipe((0,s.map)(a=>a.reduce((e,l)=>e+l.cost,0)))}canDeactivate(){return!this.bikeForm.dirty||window.confirm("Are you sure you want to discard changes?")}resetForm(){this.formRef.form.reset()}addBike(){this.formRef.addBike()}}return i.\u0275fac=function(a){return new(a||i)(c.Y36(f),c.Y36(p.F0))},i.\u0275cmp=c.Xpm({type:i,selectors:[["bikes-list"]],viewQuery:function(a,e){if(1&a&&(c.Gf(v0,5),c.Gf(z0,5),c.Gf(h0,5),c.Gf(s0,5)),2&a){let l;c.iGM(l=c.CRH())&&(e.TaxRef=l.first),c.iGM(l=c.CRH())&&(e.addBikeTitle=l.first),c.iGM(l=c.CRH())&&(e.formRef=l.first),c.iGM(l=c.CRH())&&(e.bikeRows=l)}},decls:40,vars:4,consts:[[1,"row","vh-100","overflow-auto"],[1,"col-12","col-sm-3","col-xl-2","px-sm-2","px-0","d-flex","sticky-top"],[1,"sidebar","w-100"],[1,"col-12","col-sm-9","col-xl-10","d-flex","flex-column","h-100"],["content",""],[1,"col-sm-12"],[1,"app-table","table","rounded","d-inline-block","d-md-table"],["id","Model"],["id","Delivery date"],["id","Repair deadline"],["id","Client name"],["id","Cost"],["id","Remove button"],["class","row-bike","app-bike-table-row","",3,"bike","routerLink",4,"ngFor","ngForOf"],[3,"cost"],["TaxRef",""],[1,"mt-5"],["bikeForm",""],[1,"col","d-flex","align-items-end","justify-content-end"],["type","submit",1,"btn","btn-primary","btn-lg",3,"click"],[1,"btn","btn-secondary","float-end","btn-lg","ms-1",3,"click"],["app-bike-table-row","",1,"row-bike",3,"bike","routerLink"]],template:function(a,e){1&a&&(c.TgZ(0,"div",0),c.TgZ(1,"div",1),c._UZ(2,"app-sidebar",2),c.qZA(),c.TgZ(3,"div",3),c.TgZ(4,"div",4),c.TgZ(5,"h5"),c._uU(6,"Bikes List"),c.qZA(),c.qZA(),c.TgZ(7,"div",5),c.TgZ(8,"table",6),c.TgZ(9,"caption"),c._uU(10,"Table describing bike list"),c.qZA(),c.TgZ(11,"thead"),c.TgZ(12,"tr"),c.TgZ(13,"th",7),c._uU(14,"Bike "),c.qZA(),c.TgZ(15,"th",8),c._uU(16," Delivery Date "),c.qZA(),c.TgZ(17,"th",9),c._uU(18," Deadline "),c.qZA(),c.TgZ(19,"th",10),c._uU(20," Client "),c.qZA(),c.TgZ(21,"th",11),c._uU(22," Cost "),c.qZA(),c.TgZ(23,"th",12),c._uU(24,"Remove"),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"tbody"),c.YNc(26,M0,1,4,"tr",13),c.ALo(27,"async"),c.qZA(),c.qZA(),c.qZA(),c._UZ(28,"div"),c._UZ(29,"app-total-cost",14,15),c.TgZ(31,"h3",16),c._uU(32,"Add new Bike"),c.qZA(),c._UZ(33,"app-bike-form",null,17),c.TgZ(35,"div",18),c.TgZ(36,"button",19),c.NdJ("click",function(){return e.addBike()}),c._uU(37," Submit "),c.qZA(),c.TgZ(38,"button",20),c.NdJ("click",function(){return e.resetForm()}),c._uU(39," Reset "),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&a&&(c.xp6(26),c.Q6J("ngForOf",c.lcZ(27,2,e.bikes)),c.xp6(3),c.Q6J("cost",e.cost))},directives:[X7,h.sg,c0,k,t0,p.rH],pipes:[h.Ov],styles:[".total-cost,.no-bikes-info{text-align:center;font-size:18px;text-transform:uppercase;font-weight:700;padding:20px;background-color:#1d1d1d}.after-deadline{background-color:#fdd!important}.sidebar{background:#1D1D1D}.checkbox{margin-left:15px}th{font-weight:700;text-transform:uppercase;color:#fff}.app-table{background:#1D1D1D;overflow-x:auto}.data-header{font-size:22px;text-transform:uppercase;font-weight:700;margin:15px}.data-container{padding:15px;background:#1D1D1D;margin:15px}\n"],encapsulation:2}),i})();var d0=v(4762),u0=v(4747);const C0=["bikeForm"],H0=function(i){return{active:i}};function x0(i,o){if(1&i&&(c.TgZ(0,"div",21),c._UZ(1,"img",22),c.qZA()),2&i){const a=o.$implicit,e=o.index,l=c.oxw(2);c.Q6J("ngClass",c.VKq(2,H0,1==l.stateFlags[e])),c.xp6(1),c.s9C("src",a,c.LSH)}}function V0(i,o){if(1&i){const a=c.EpF();c.TgZ(0,"div",8),c.TgZ(1,"div",9),c.TgZ(2,"div",10),c._UZ(3,"button",11),c._UZ(4,"button",12),c._UZ(5,"button",13),c.qZA(),c.TgZ(6,"div",14),c.YNc(7,x0,2,4,"div",15),c.qZA(),c.TgZ(8,"button",16),c.NdJ("click",function(){return c.CHM(a),c.oxw().toggleStateLeft()}),c._UZ(9,"span",17),c.TgZ(10,"span",18),c._uU(11,"Previous"),c.qZA(),c.qZA(),c.TgZ(12,"button",19),c.NdJ("click",function(){return c.CHM(a),c.oxw().toggleStateRight()}),c._UZ(13,"span",20),c.TgZ(14,"span",18),c._uU(15,"Next"),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&i){const a=c.oxw();c.xp6(7),c.Q6J("ngForOf",a.imageUrl)}}const L0=[{path:"",component:H,children:[{path:"",component:b0},{path:":id",component:(()=>{class i{constructor(a,e,l){this.route=a,this.bikeService=e,this.formBuilder=l,this.imageUrl=[],this.stateFlags=[],this.indexStateFlag=0,this.showCarousel=!0,this.editForm=!0}ngOnInit(){this.id=this.route.snapshot.params.id,this.bikeService.getBike(this.id).pipe((0,u0.tap)(a=>this.patchBikeForm(a))).subscribe(a=>this.bike=a),this.showCarousel&&this.initializeStateArray()}patchBikeForm(a){const{imageUrl:l}=a,b=(0,d0._T)(a,["id","imageUrl"]);0!==l.length?this.imageUrl=l:this.showCarousel=!1,this.showCarousel=!0,this.bikeForm.form.patchValue(b)}initializeStateArray(){this.stateFlags[0]=!0;for(let a=1;a<this.imageUrl.length;a++)this.stateFlags[a]=!1}toggleStateLeft(){console.log(this.bike),this.indexStateFlag++,this.indexStateFlag<this.stateFlags.length?(this.stateFlags[--this.indexStateFlag]=!1,this.stateFlags[this.indexStateFlag]=!0):this.indexStateFlag=0}toggleStateRight(){this.indexStateFlag--,this.indexStateFlag<this.stateFlags.length?(this.stateFlags[++this.indexStateFlag]=!1,this.stateFlags[this.indexStateFlag]=!0):this.indexStateFlag=0}resetForm(){this.bikeForm.form.reset()}editBike(a){this.bikeForm.editBike(a)}}return i.\u0275fac=function(a){return new(a||i)(c.Y36(p.gz),c.Y36(f),c.Y36(r.qu))},i.\u0275cmp=c.Xpm({type:i,selectors:[["app-edit-bike"]],viewQuery:function(a,e){if(1&a&&c.Gf(C0,5),2&a){let l;c.iGM(l=c.CRH())&&(e.bikeForm=l.first)}},decls:11,vars:2,consts:[[1,"editForm"],[1,"mb-3"],["class","carousel-container mb-5",4,"ngIf"],[3,"editForm"],["bikeForm",""],[1,"col","d-flex","align-items-end","justify-content-end"],["type","submit",1,"btn","btn-primary","btn-lg",3,"click"],[1,"btn","btn-secondary","float-end","btn-lg","ms-1",3,"click"],[1,"carousel-container","mb-5"],["id","carouselExampleIndicators","data-bs-ride","carousel",1,"carousel","carousel-dark","slide"],[1,"carousel-indicators"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","0","aria-current","true","aria-label","Slide 1",1,"active"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","1","aria-label","Slide 2"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide-to","2","aria-label","Slide 3"],[1,"carousel-inner"],["class","carousel-item",3,"ngClass",4,"ngFor","ngForOf"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","prev",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleIndicators","data-bs-slide","next",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],[1,"carousel-item",3,"ngClass"],["alt","...",1,"d-block","w-100",3,"src"]],template:function(a,e){1&a&&(c.TgZ(0,"div",0),c.TgZ(1,"h1",1),c._uU(2,"Edit bike"),c.qZA(),c.YNc(3,V0,16,1,"div",2),c._UZ(4,"app-bike-form",3,4),c.TgZ(6,"div",5),c.TgZ(7,"button",6),c.NdJ("click",function(){return e.editBike(e.bike)}),c._uU(8," Edit "),c.qZA(),c.TgZ(9,"button",7),c.NdJ("click",function(){return e.resetForm()}),c._uU(10," Reset "),c.qZA(),c.qZA(),c.qZA()),2&a&&(c.xp6(3),c.Q6J("ngIf",e.showCarousel),c.xp6(1),c.Q6J("editForm",e.editForm))},directives:[h.O5,k,h.sg,h.mk],styles:[".editForm[_ngcontent-%COMP%]{background-color:#1d1d1d;width:100%;margin:1rem auto auto;padding:0}@media (min-width: 576px){.editForm[_ngcontent-%COMP%]{width:80%;padding:2rem}}.carousel-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}"]}),i})()}]}];let N0=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[p.Bz.forChild(L0)],p.Bz]}),i})();var g0=v(7506);let Z0=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=c.oAB({type:i}),i.\u0275inj=c.cJS({imports:[[h.ez,p.Bz,r.u5,g0.m,r.UX,N0]]}),i})()}}]);